# CURL


## 目录

* [简介](#简介)
* [常用参数详解](#常用参数详解)

## 简介

curl 是常用的命令行工具,用来请求 Web 服务器,然后得到和提取数据,显示在"标准输出"（stdout）上面。
它的名字就是客户端（client）的 URL 工具的意思。它支持多种协议,功能非常强大,命令行参数多达几十种。
如果熟练的话,完全可以取代 Postman 这一类的图形界面工具。

我一向以为,curl只是一个编程用的函数库。

最近才发现,这个命令本身,就是一个无比有用的网站开发工具：

1. 查看网页源码
2. 自动跳转
3. 显示头信息
4. 显示通信过程
5. 发送表单信息
6. HTTP动词
7. 文件上传
8. Referer字段
9. UserAgent字段
10. cookie
11. 增加头信息
12. HTTP认证


## 常用参数详解

|参数|描述|
|:-----|:-----|
|AAAAAAAAAAAAA|AAAAAAAAAAAAA(为了显示效果)|
|-A/--user-agent|指定客户端的用户代理标头,即User-Agent。默认为`curl/[version]`|
| |`curl -v -A 'golang/1.0' http://127.0.0.1:8080/test`|
| |`curl -v -H 'User-Agent: golang/1.0' http://127.0.0.1:8080/test`同上|
|-b/--cookie|向服务器发送Cookie|
| |`curl -v -b user_name=admin http://127.0.0.1:8080/test`|
| |生成标头`Cookie: user_name=admin`|
| |`curl -v --cookie user_name=admin http://127.0.0.1:8080/test`同上|
|-c|将服务器设置的Cookie写入一个文件|
| |`curl -v -c cookies.txt http://127.0.0.1:8080/test`将Cookie写入[cookies.txt](#cookies文本内容)|
|-d/--data|发送POST请求的数据体|
| |`curl -v -d user_name=admin -d password=123456 http://127.0.0.1:8080/test`|
| |`curl -v -d 'user_name=admin&password=123456' http://127.0.0.1:8080/test`|
| |两种方式一样。使用`-d`参数以后,会自动将请求转为POST,|
| |并且会自动加上标头`Content-Type: application/x-www-form-urlencoded`|
| |`curl -v -d '@data.txt' http://127.0.0.1:8080/test`读取本地[data.txt](#data文本内容)文件的数据发送|
|--data-urlencode|等同于`-d`,发送POST请求的数据体,区别在于会自动将发送的数据进行URL编码|
| |`curl -v --data-urlencode 'user_name=ad min&password=123456' http://127.0.0.1:8080/test`|
| |发送的数据`user_name=ad min&password=123456`中有一个空格,需要URL编码|
|-e/--referer|用来设置标头`Referer`,表示请求的来源|
| |`curl -v -e 'http://127.0.0.1:8080/test' http://127.0.0.1:8080/test`|
| |`curl -v -H 'Referer: http://127.0.0.1:8080/test'  http://127.0.0.1:8080/test`同上|
|-F/--file|向服务器上传二进制文件|
| |`curl -F '[name]=@[localfilename]' -F [data] [URL]`|
| |`curl -v -F 'file=@logo.png' http://127.0.0.1:8080/test`|
| |使用-F参数以后,请求会自动加上标头`Content-Type: multipart/form-data`|
| |`curl -v -F 'file=@logo.png;type=image/png'  http://127.0.0.1:8080/test`指定类型|
| |上面命令指定MIME类型为`image/png`,否则会把MIME类型设为`application/octet-stream`|
| |`curl -v -F 'file=@logo.png;filename=test.png' http://127.0.0.1:8080/test`指定文件名|
|-G|构造URL的查询字符串|
| |`curl -v -G -d user_name=admin -d password=123456 http://127.0.0.1:8080/test`|
| |`curl -v -G -d 'user_name=admin&password=123456' http://127.0.0.1:8080/test`|
| |两种方式一样。使用`-G`参数后会发出一个GET请求|
| |`curl -v -G --data-urlencode 'user_name=ad min&password=123456' http://127.0.0.1:8080/test`如果数据需要URL编码,可以结合`--data-urlencode`参数|
|-H|添加请求的标头|
| |`curl -v -H 'Accept-Language: en-US' -H 'Secret-Message: xyzzy' http://127.0.0.1:8080/test`|
| |`curl -v -d '{"user_name":"admin","password":"123456"}' -H 'content-type: application/json' http://127.0.0.1:8080/test`|
| |添加标头`Content-Type: application/json`,然后用`-d`参数发送JSON数据|
|-i|打印出服务器回应的HTTP标头|
| |`curl -i http://127.0.0.1:8080/test`|
| |上面命令收到服务器响应后,先输出服务器响应的标头,然后空一行,再输出网页的源码|
|-I/--head|向服务器发出HEAD请求,然会将服务器响应的HTTP标头打印出来|
| |`curl -v -I http://127.0.0.1:8080/test`|
| |`curl -v --head http://127.0.0.1:8080/test`|
|-k|指定跳过SSL检测|
| |`curl -v -k http://127.0.0.1:8080/test`|
|-L|让HTTP请求跟随服务器重定向,默认不跟随重定向|
| |`curl -v -L http://127.0.0.1:8080/test`|
|--limit-rate|限制HTTP请求和回应的带宽,模拟慢网速的环境|
| |`curl -v --limit-rate 200k http://127.0.0.1:8080/test`将带宽限制在每秒200K字节|
|-o|将服务器的回应保存成文件,等同于`wget`命令|
| |`curl -o [文件名] URL`|
| |`curl -v -o test.html http://127.0.0.1:8080/test`|
|-O|将服务器回应保存成文件,并将URL的最后部分当作文件名|
| |`curl -v -O http://127.0.0.1:8080/test.html`|
|-s|不输出错误和进度信息|
| |`curl -s http://127.0.0.1:8080/test`不会显示错误信息,不发生错误正常显示运行结果|
|-S|只输出错误信息|
| |`curl -S http://127.0.0.1:8080/test`|
|-u|设置服务器认证的用户名和密码|
| |`curl -v -u 'admin"123456' http://127.0.0.1:8080/test`|
| |设置用户名为`admin`,密码为`123456`|
| |然后将其转为HTTP标头`Authorization: Basic YWRtaW4iMTIzNDU2OjEyMzQ1Ng==`|
| |`curl -v  http://admin:123456@127.0.0.1:8080/test`curl能够识别URL里面的用户名和密码|
| |`curl -v -u admin http://127.0.0.1:8080/test`只设置用户名,执行命令会提示用户输入密码|
|-v/--trace|输出通信的整个过程,用于调试|
| |`curl -v http://127.0.0.1:8080/test`|
| |如果你觉得上面的信息还不够,那么下面的命令可以查看更详细的通信过程,`--trace -`输出原始的二进制数据|
| |`curl --trace -  http://127.0.0.1:8080/test`|
| |`curl --trace-ascii output.txt http://127.0.0.1:8080/test` 打开[output.txt](#output文本内容)文件查看|
|-x|指定HTTP请求的代理|
| |`curl -v -x http://10.64.144.3:8123 https://www.google.com`|
|-X|指定HTTP请求的方法|
| |`curl -v -X POST http://127.0.0.1:8080/test`发出POST请求|
| |`curl -v -X DELETE http://127.0.0.1:8080/test` 发出DELETE请求|
|||
|||
|||
|||
|||
|||

### cookies文本内容

```
# Netscape HTTP Cookie File
# https://curl.haxx.se/docs/http-cookies.html
# This file was generated by libcurl! Edit at your own risk.

127.0.0.1	FALSE	/	FALSE	61572939117	user_id	10001
```

#### data文本内容

```
user_name=admin&password=123456
```

### output文本内容

```
== Info:   Trying 127.0.0.1...
== Info: TCP_NODELAY set
== Info: Connected to 127.0.0.1 (127.0.0.1) port 8080 (#0)
=> Send header, 82 bytes (0x52)
0000: GET /test HTTP/1.1
0014: Host: 127.0.0.1:8080
002a: User-Agent: curl/7.54.0
0043: Accept: */*
0050:
<= Recv header, 17 bytes (0x11)
0000: HTTP/1.1 200 OK
<= Recv header, 47 bytes (0x2f)
0000: Content-Type: application/json; charset=utf-8
<= Recv header, 37 bytes (0x25)
0000: Date: Wed, 06 Nov 2019 06:19:24 GMT
<= Recv header, 20 bytes (0x14)
0000: Content-Length: 74
<= Recv header, 2 bytes (0x2)
0000:
<= Recv data, 74 bytes (0x4a)
0000: {"query_form":{},"form":{},"post_form":{},"multipart_form":null,
0040: "body":""}
== Info: Connection #0 to host 127.0.0.1 left intact
```